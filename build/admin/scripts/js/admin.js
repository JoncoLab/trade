"use strict";var main=function(){var e=$(".navbar").height(),t=$("main"),a=$("table.users, table.lots"),r=$("header .navbar button"),i=$(".users td.ver"),n=i.children(".verification-form"),s=function(e){var t=$("#loading");switch(e){case!0:t.show(0,function(){t.css({display:"flex"})});break;case!1:t.hide();break;default:alert("Сталася помилка! Сторінку буде перезавантажено!"),window.location.reload()}},l=$("form .content"),c=l.children(".add-paragr"),o=$(".trade");t.css("margin-top",e+20+"px"),a.DataTable({iDisplayLength:10}),r.click(function(){var e=$(".page-maker"),t=$('[id$="_wrapper"]'),a=$(this).attr("id"),r=$("#DataTables_Table_1_wrapper"),i=$("#DataTables_Table_0_wrapper");switch(e.hide(),t.hide(),$("."+a).toggle(),a){case"users":r.show();break;case"lots":i.show()}}),n.on("submit",function(){var e=$(this).parents("td"),t=e.siblings(".id").text(),a=$(this).children(".set-trader-id").val(),r=$("body");return s(!0),$.ajax({url:"scripts/php/admin-verify.php",dataType:"html",method:"POST",data:{id:t,traderId:a},success:function(e){s(!1),r.prepend(e)},error:function(){s(!1),alert("Не вдається з'єднатися з базою даних! Сторінку буде перезавантажено!"),window.location.reload()}}),!1}),c.click(function(){var e=$(".content textarea").val(),t=l.children("textarea"),a=$(".clear"),r=$(".watch");""!==e&&(l.append('<div class="new-paragr"><button class="remove-paragr" type="button">Стерти</button><button class="edit-paragr" type="button">Редаг</button><button type="button" class="edited">OK</button><p class="paragraph">'+e+"</p></div>"),t.val(""));var i=$(".content .new-paragr"),n=i.children(".edit-paragr"),s=i.children(".edited"),c=i.children(".remove-paragr");a.click(function(){t.val("")}),n.unbind().on("click",function(){var e=$(this),t=e.siblings("p").html(),a=e.siblings("textarea, p"),r=e.siblings(".edited");a.remove(),e.parent().prepend('<textarea autofocus rows="12" tabindex="1">'+t+"</textarea>"),e.hide(),r.show(),e.siblings("textarea").focus()}),s.click(function(){var e=$(this),t=e.siblings("textarea").text();""!==t&&(e.siblings("p").remove(),e.parent().append("<p>"+t+"</p>"),e.hide(),e.siblings("textarea").remove(),e.siblings(".edit-paragr").show())}),c.click(function(){$(this).parent().remove()}),r.on("click",function(){var e=$("#header"),t=e.val(),a="<h2>"+t+"</h2>",r="";if(i.each(function(){r=r+"<p>"+$(this).children("p").html()+"</p>"}),0!==i.length&&""!==t){var n="<article class='preview'><span class='back' style='color: grey; float: right;'>Повернутись - подвійний клік по статті</span>"+a+r+"</article>",s=$("article.preview"),l=$("fieldset");l.hide(),s.remove(),$("form.write-article").append(n)}else if(""==t)return e.toggleClass("error"),!1;$("article").focus(),s.dblclick(function(){$(this).remove(),l.show()})})}),o.submit(function(){var e=$(this).find(".form-item"),t=e.has("input:checked"),a=$("#sellers"),r=t.length;if(0==r)return alert("Жодного продавця не вибрано!"),!1;var i="";t.each(function(e){i+=$(this).children(".seller").text(),e!=r-1&&(i+=",")}),a.val(i)})};$(document).ready(main);